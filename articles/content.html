<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Survey Content • surveydown</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Survey Content">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">surveydown</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/surveydown.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/install.html">Installation</a></li>
    <li><a class="dropdown-item" href="../articles/content.html">Survey Content</a></li>
    <li><a class="dropdown-item" href="../articles/questions.html">Question Types</a></li>
    <li><a class="dropdown-item" href="../articles/formatting.html">Formatting Your Survey</a></li>
    <li><a class="dropdown-item" href="../articles/control.html">Control Logic</a></li>
    <li><a class="dropdown-item" href="../articles/database.html">Database Setup</a></li>
    <li><a class="dropdown-item" href="../articles/deploy.html">Deploying Your Survey</a></li>
    <li><a class="dropdown-item" href="../articles/adminpage.html">Admin Page</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jhelvy/surveydown/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Survey Content</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jhelvy/surveydown/blob/main/vignettes/content.Rmd" class="external-link"><code>vignettes/content.Rmd</code></a></small>
      <div class="d-none name"><code>content.Rmd</code></div>
    </div>

    
    
<p>This guide covers the main elements in your <code>.qmd</code> survey
file as well as how to add content to your survey, like pages,
questions, etc.</p>
<div class="section level2">
<h2 id="start-with-a-template">Start with a template<a class="anchor" aria-label="anchor" href="#start-with-a-template"></a>
</h2>
<p>In the R console, run the following to to setup a template
survey:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">surveydown</span><span class="fu">::</span><span class="fu"><a href="../reference/sd_create_survey.html">sd_create_survey</a></span><span class="op">(</span><span class="st">"path/to/folder"</span><span class="op">)</span></span></code></pre></div>
<p>This will create a folder located at <code>"path/to/folder"</code>
with the following files:</p>
<ul>
<li>
<code>example.qmd</code>: a template survey you should edit.</li>
<li>
<code>example.Rproj</code>: An RStudio project file (helpful if
you’re working in RStudio)</li>
<li>
<code>_extensions</code>: A folder with the <a href="https://github.com/jhelvy/surveydown-ext" class="external-link">surveydown Quarto
extension</a> needed to make everything work (don’t modify this).</li>
</ul>
<blockquote>
<p>Every survey created with {surveydown} should be in its own separate
project folder.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="survey-components">Survey components<a class="anchor" aria-label="anchor" href="#survey-components"></a>
</h2>
<p>Every {surveydown} survey is configured in a single <code>.qmd</code>
file that consists of <strong>4 parts</strong>:</p>
<ol style="list-style-type: decimal">
<li>The YAML header.</li>
<li>The setup code chunk.</li>
<li>The survey body.</li>
<li>The server code chunk.</li>
</ol>
<p><img src="images/survey-screenshot.png" width="70%"></p>
</div>
<div class="section level2">
<h2 id="yaml-header">1. YAML Header<a class="anchor" aria-label="anchor" href="#yaml-header"></a>
</h2>
<p>The YAML header is at the top of the <code>.qmd</code> file. In
addition to two required elements, the YAML can be used to set the
survey theme as well as modify the survey progress bar.</p>
<div class="section level3">
<h3 id="required-yaml-content">Required YAML content<a class="anchor" aria-label="anchor" href="#required-yaml-content"></a>
</h3>
<p>For a surveydown survey, your YAML must contain at least the
following:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">server</span><span class="kw">:</span><span class="at"> shiny</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">surveydown</span><span class="kw">]</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>The <code>server: shiny</code> part ensures that the document will
render as a shiny app. The <code>filters: [surveydown]</code> part
applies the surveydown Quarto extension to the project, which is
required.</p>
</div>
<div class="section level3">
<h3 id="setitng-the-theme">Setitng the theme<a class="anchor" aria-label="anchor" href="#setitng-the-theme"></a>
</h3>
<p>The YAML can also be used to set several <strong>optional</strong>
global settings, such as the overall survey <code>theme</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span><span class="at"> united</span><span class="co"> # Any bootswatch theme </span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>There are <a href="https://bootswatch.com" class="external-link">25 bootswatch themes</a>
to choose from. You can also provide a <code>custom.scss</code> file to
further modify the theme, or even combine the two, e.g.:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">united</span><span class="kw">,</span><span class="at"> custom.scss</span><span class="kw">]</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="progress-bar">Progress bar<a class="anchor" aria-label="anchor" href="#progress-bar"></a>
</h3>
<p>You can modify the survey progress bar with the <code>barcolor</code>
and <code>barposition</code> keys, e.g.:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">barcolor</span><span class="kw">:</span><span class="at"> theme </span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">barposition</span><span class="kw">:</span><span class="at"> top </span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>The <code>barcolor</code> key defines the color of the progress bar.
It defaults to <code>theme</code>, meaning it will take the primary
theme color. You may also use any hex code to overwrite this color as
you wish, e.g.: <code>#768692</code>.</p>
<p>The <code>barposition</code> key defines the position of the progress
bar. It defaults to <code>top</code>, but can also be changed to
<code>bottom</code> or <code>none</code> (to remove the bar). The
progress bar updates on every <strong>question</strong> the user clicks
on, not pages.</p>
</div>
</div>
<div class="section level2">
<h2 id="setup-code-chunk">2. Setup code chunk<a class="anchor" aria-label="anchor" href="#setup-code-chunk"></a>
</h2>
<p>After the YAML header, you’ll need to load the
<code>surveydown</code> package and run the <code><a href="../reference/sd_setup.html">sd_setup()</a></code>
function. This should be placed inside a code chunk that looks like
this:</p>
<pre><code>```{r}
#| context: setup
#| warning: false
#| message: false

# Load the package
library(surveydown)

# Run initial setup function (essential - do not delete)
sd_setup()
```</code></pre>
<p>Anything loaded in the setup chunk is accessible in both your survey
body and your server, so we recommend also loading other packages and /
or data in this chunk as well.</p>
</div>
<div class="section level2">
<h2 id="survey-body">3. Survey body<a class="anchor" aria-label="anchor" href="#survey-body"></a>
</h2>
<p>The survey body is all the content in between your setup code chunk
and your server code chunk. You can use markdown (or the RStudio visual
editor) to insert text, images, etc. just like you would in any Quarto
document.</p>
<p>The unique elements to a surveydown survey are
<strong>pages</strong>, <strong>navigation buttons</strong>, and
<strong>questions</strong>.</p>
<div class="section level3">
<h3 id="adding-pages">Adding pages<a class="anchor" aria-label="anchor" href="#adding-pages"></a>
</h3>
<p>In surveydown, pages are defined using fences (<code>:::</code>),
like this:</p>
<pre><code>::: {#welcome .sd-page}

Page 1 content here

:::

::: {#page2 .sd-page}

Page 2 content here

:::</code></pre>
<p>As you can see, we use three colon symbols <code>:::</code>, called a
“fence”, to mark the start and end of pages. This notation is commonly
used in Quarto for a variety of use cases, like defining <a href="https://quarto.org/docs/authoring/figures.html#subfigures" class="external-link">subfigures</a>
in images.</p>
<p>In the starting fence, you need to define a page name
(e.g. <code>welcome</code> and <code>page2</code> in the example above)
and you need to define the class as <code>.sd-page</code>. Then anything
you put between the page fences will appear on that page.</p>
</div>
<div class="section level3">
<h3 id="adding-navigation-buttons">Adding navigation buttons<a class="anchor" aria-label="anchor" href="#adding-navigation-buttons"></a>
</h3>
<p>To navigate to the next page, you need to insert a
<code><a href="../reference/sd_next.html">sd_next()</a></code> function call inside a code chunk, like this:</p>
<pre><code>```{r}
sd_next(next_page = 'page2')
```</code></pre>
<p>The above code chunk will create a “Next” button that goes on to page
2 that looks like this:</p>
<button id="next-page2" type="button" class="btn btn-default action-button" style="display: block; margin: auto;" onclick="Shiny.setInputValue('next_page', 'page2');">Next</button>
<p>In this example, the next button has to be inserted in a code chunk
in between the <code>:::</code> fences of the <code>welcome</code> page
in order to have a “Next” button that goes on to page 2. You can also
send the user to other pages by just changing the value assigned to the
<code>next_page</code> argument.</p>
<p>Finally, you can also change the label of the button by changing the
<code>label</code> argument, like this:</p>
<pre><code>```{r}
sd_next(next_page = 'page2', label = 'Next page')
```</code></pre>
<button id="next-page2" type="button" class="btn btn-default action-button" style="display: block; margin: auto;" onclick="Shiny.setInputValue('next_page', 'page2');">Next page</button>
</div>
<div class="section level3">
<h3 id="adding-questions">Adding questions<a class="anchor" aria-label="anchor" href="#adding-questions"></a>
</h3>
<p>Every survey question is created using the <code><a href="../reference/sd_question.html">sd_question()</a></code>
function inside a code chunk. The question type is defined by the
<code>type</code> argument. For example, to add a multiple choice
question, you could insert the following code chunk:</p>
<pre><code>```{r}
sd_question(
  type  = 'mc',
  id    = 'penguins',
  label = "Which is your favorite type of penguin?",
  option = c(
    'Adélie'    = 'adelie',
    'Chinstrap' = 'chinstrap',
    'Gentoo'    = 'gentoo'
  )
)
```</code></pre>
<p>The above code chunk will create a multiple choice question that
looks like this:</p>
<div id="container- penguins" data-question-id="penguins" class="question-container">
<div id="penguins" style="width:100%;" class="form-group shiny-input-radiogroup shiny-input-container" role="radiogroup" aria-labelledby="penguins-label">
<label class="control-label" id="penguins-label" for="penguins"><p>Which is your favorite type of penguin? <span class="required-asterisk" style="display:none; color: red; font-size: 1.5em; vertical-align: middle; position: relative; top: 0.1em;">*</span></p>
</label>
<div class="shiny-options-group">
<div class="radio">
<label>
<input type="radio" name="penguins" value="adelie"><span>Adélie</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="penguins" value="chinstrap"><span>Chinstrap</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="penguins" value="gentoo"><span>Gentoo</span>
</label>
</div>
</div>
</div>
</div>
<p><br></p>
<p>The <code><a href="../reference/sd_question.html">sd_question()</a></code> function can be used to create a
variety of question types, like text input, select drop down choices,
and more by changing the <code>type</code> argument (see
<code><a href="../articles/questions.html">vignette("questions")</a></code>).</p>
<p>The function has many other arguments for customizing the look and
feel of the question, such as the <code>height</code> and
<code>width</code> (see <code><a href="../articles/formatting.html">vignette("formatting")</a></code>).</p>
<p>Finally, <code><a href="../reference/sd_question.html">sd_question()</a></code> has a <code>required</code>
argument that can be used to make a question required or optional (e.g.,
<code>required = TRUE</code>). The default is <code>FALSE</code>,
meaning the question is optional.</p>
</div>
</div>
<div class="section level2">
<h2 id="server-code-chunk">4. Server code chunk<a class="anchor" aria-label="anchor" href="#server-code-chunk"></a>
</h2>
<p>At the very bottom of the .qmd file is a special “server” code chunk
(that’s the <code>#| context: server</code> bit) that defines the app
server. This is where you can customize and control the survey flow
logic as well as where you define the database that will store the
survey response data. It looks like this:</p>
<pre><code>```{r}
#| context: server

# Define the database settings
db &lt;- sd_database()

# Define the configuration settings
config &lt;- sd_config()

# The sd_server() function initiates your survey - don't change this
sd_server(
  input   = input,
  session = session,
  config  = config,
  db      = db
)
```</code></pre>
<p>The <code><a href="../reference/sd_server.html">sd_server()</a></code> function at the bottom makes everything
run, which you can safely ignore - just don’t change it and all will be
good!</p>
<p>The <code><a href="../reference/sd_database.html">sd_database()</a></code> function is where you set up your
database. See <code><a href="../articles/database.html">vignette("database")</a></code> for details.</p>
<p>The <code><a href="../reference/sd_config.html">sd_config()</a></code> function is where you can define custom
control logic for the survey, such as <em>conditional display</em>
(conditionally displaying a question based on responses to questions),
or <em>conditional skip</em> (conditionally sending the respondent to a
page based on responses to questions). See
<code><a href="../articles/control.html">vignette("control")</a></code></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Paul Helveston, Pingfan Hu, Bogdan Bunea.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
